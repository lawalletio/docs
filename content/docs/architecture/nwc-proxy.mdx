---
title: "Courtesy NWC via lncurl"
description: "Provisioning temporary NWC wallets using lncurl, powered by Alby Hub."
---

## Overview

Courtesy NWC connections are provisioned via [**lncurl**](https://github.com/rolznz/lncurl) ([lncurl.lol](https://lncurl.lol)) — an agent-first custodial Lightning wallet service powered by [Alby Hub](https://github.com/getAlby/hub). A single HTTP call creates a wallet and returns a Nostr Wallet Connect (NWC) connection string.

**Provider**: [lncurl.lol](https://lncurl.lol)
**Protocol**: NWC (NIP-47)
**Cost**: 1 sat/hour per wallet (auto-deleted when balance can't cover upkeep)

---

## Purpose

Enables users to upgrade from alias/redirect to NWC-connected addresses without needing their own wallet infrastructure. lncurl provisions temporary NWC wallets on demand — no accounts, no signups, just a single HTTP request.

---

## How It Works

1. User requests a courtesy NWC wallet from the platform
2. Platform calls `POST https://lncurl.lol` to provision a new wallet
3. lncurl returns an NWC connection string (powered by Alby Hub)
4. Connection string is linked to the user's lightning address
5. Payments to the address now route via NWC instead of redirect
6. Wallet costs 1 sat/hour — auto-deleted when it can't pay
7. User can replace the courtesy NWC with their own wallet at any time

---

## Why lncurl

| Feature | Benefit |
|---------|---------|
| **Single-command provisioning** | `curl -X POST https://lncurl.lol` — no accounts, no OAuth |
| **NWC-native** | Returns an NWC connection string directly |
| **Powered by Alby Hub** | Battle-tested Lightning infrastructure |
| **Self-hostable** | Run your own lncurl instance for full sovereignty |
| **Agent-first** | Designed for programmatic consumption |
| **Pay-as-you-go** | 1 sat/hour — wallets auto-expire when empty |

---

## Integration

### Provisioning a wallet

```bash
curl -X POST https://lncurl.lol
```

**Response:**
```json
{
  "connectionString": "nostr+walletconnect://...",
  "balance": 0,
  "costPerHour": 1
}
```

### From the platform

The `lawallet-web` service calls lncurl when a user requests a courtesy NWC upgrade:

```typescript
const response = await fetch('https://lncurl.lol', { method: 'POST' });
const { connectionString } = await response.json();

// Link to the user's lightning address
await linkNWCConnection(userId, connectionString);
```

---

## Self-Hosting lncurl

For full sovereignty, operators can self-host their own lncurl instance:

- [**lncurl on GitHub**](https://github.com/rolznz/lncurl)
- Requires an Alby Hub instance
- Configure `LNCURL_URL` in `lawallet-web` environment to point to your instance

---

## Configuration

| Variable | Description | Default |
|----------|-------------|---------|
| `LNCURL_URL` | lncurl instance URL | `https://lncurl.lol` |
| `COURTESY_NWC_ENABLED` | Enable courtesy NWC provisioning | `true` |

---

## Design Principles

- **Zero-friction provisioning**: One HTTP call, no accounts
- **NWC-native**: Direct NWC connection strings, no protocol translation
- **Self-hostable**: Run your own lncurl for full control
- **Ephemeral by design**: Wallets auto-expire, incentivizing users to graduate to own wallets

---

## React Hook Integration

The frontend consumes courtesy NWC via the `useCourtesyNWC` hook:

```typescript
const { provision, revoke, status, isLoading, error } = useCourtesyNWC();

// Provision a new courtesy wallet via lncurl
const connection = await provision();

// Check status
const currentStatus = await status(connection.id);

// Revoke when upgrading to own wallet
await revoke(connection.id);
```
